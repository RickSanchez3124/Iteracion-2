create sequence super_andes_it2;

create table A_ROL
    (NOMBRE VARCHAR2(255 BYTE),
    DESCRIPCION VARCHAR2(255 BYTE),
    DOCUMENTO NUMBER,
    CONSTRAINT A_ROL_KEY PRIMARY KEY (DOCUMENTO));


create table A_USUARIO
    (ROL VARCHAR2(255 BYTE),
    TIPO_DOC VARCHAR2(255 BYTE), NUM_DOC NUMBER,
    NOMBRE VARCHAR2(255 BYTE), CORREO_E VARCHAR2(255 BYTE),
    KEY_WORD VARCHAR2(255 BYTE),
    CONSTRAINT A_USUARIO_PK PRIMARY KEY (NUM_DOC)
    );

alter table A_USUARIO
    ADD CONSTRAINT A_USUARIO_NNOMBRE
    CHECK (NOMBRE IS NOT NULL)
ENABLE;

alter table A_USUARIO
    ADD CONSTRAINT A_USUARIO_NCORREO
    CHECK (CORREO_E IS NOT NULL)
ENABLE;

alter table A_USUARIO
    ADD CONSTRAINT A_USUARIO_NPALABRA
    CHECK (KEY_WORD IS NOT NULL)
ENABLE;

alter table A_USUARIO
    ADD CONSTRAINT A_USUARIO_NROL
    CHECK (ROL IS NOT NULL)
ENABLE;

alter table A_USUARIO
    ADD CONSTRAINT A_USUARIO_NTIPOD
    CHECK (TIPO_DOC IS NOT NULL)
ENABLE;

alter table A_USUARIO
    ADD CONSTRAINT A_USUARIO_NRO
    FOREIGN KEY(DOCUMENTO) 
    REFERENCES A_ROL(DOCUMENTO)
ENABLE;


create table A_PROMOCION
    (TIPO NUMBER,
    CONSTRAINT A_PROMOCION_PK PRIMARY KEY(TIPO));

create table A_PRODUCTO
    (NOMBRE VARCHAR2(255 BYTE), MARCA VARCHAR2(255 BYTE),
    PRECIO_U NUMBER, PRESENTACION VARCHAR2(255 BYTE), 
    PRECIO_UNIMED NUMBER, CANTIDAD_PRESENTE NUMBER,
    UNIMED VARCHAR2(255 BYTE), ESP_EMPACADO VARCHAR2(255 BYTE),
    COD_BARRA  VARCHAR2(255 BYTE),PROMOCION NUMBER,
    CONSTRAINT A_PRODUCTO_PK PRIMARY KEY (NOMBRE)
    );
    

alter table A_PRODUCTO
    add constraint FK_PRODUCTO_PROMOCION
    FOREIGN KEY (PROMOCION)
    REFERENCES A_PROMOCION(TIPO)
enable;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_MARCA
    CHECK (MARCA IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_PRECIOUNI
    CHECK (PRECIO_U IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_PRESENTACION
    CHECK (PRESENTACION IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_PRECIOUNIMED
    CHECK (PRECIO_UNIMED IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_CANTPRESENTE
    CHECK (CANTIDAD_PRESENTE IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_UNIMED
    CHECK (UNIMED IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_ESPEMPACADO
    CHECK (ESP_EMPACADO IS NOT NULL)
ENABLE;

alter table A_PRODUCTO
    ADD CONSTRAINT A_PRODUCTO_COD
    CHECK (COD_BARRA IS NOT NULL)
ENABLE;



create table A_PEDIDO
    (FECHA_E DATE, CANT_PRODUCTOS NUMBER,
    CALIFICACION_PRODUCTOS NUMBER, CALIFICACION_ENVIO NUMBER,
    ESTADO VARCHAR2(255 BYTE), PRODUCTO VARCHAR2(255 BYTE),
    CONSTRAINT A_PEDIDO_PK PRIMARY KEY (FECHA_E)
    );
    
alter table A_PEDIDO
    add constraint A_PEDIDO_PCALIF
    CHECK(CALIFICACION_PRODUCTOS IN (0,1,2,3,4,5))
ENABLE;

alter table A_PEDIDO
    add constraint A_PEDIDO_ECALIF
    CHECK(CALIFICACION_ENVIO IN (0,1,2,3,4,5))
ENABLE;

alter table A_PEDIDO
    add constraint A_PEDIDO_ESTADOIN
    CHECK(ESTADO IN ('ENTREGADO','NO ENTREGADO'))
ENABLE;

alter table A_PEDIDO
    add constraint FK_PEDIDO_PRODUCTO
    FOREIGN KEY(PRODUCTO)
    REFERENCES A_PRODUCTO(NOMBRE)
ENABLE;
alter table A_PEDIDO
    ADD CONSTRAINT A_PEDIDO_CPRODUCTOS
    CHECK (CANT_PRODUCTOS IS NOT NULL)
ENABLE;

alter table A_PEDIDO
    ADD CONSTRAINT A_PEDIDO_CALIFPRODUCTOS
    CHECK (CALIFICACION_PRODUCTOS IS NOT NULL)
ENABLE;

alter table A_PEDIDO
    ADD CONSTRAINT A_PEDIDO_CALIFSERVICIO
    CHECK (CALIFICACION_ENVIO IS NOT NULL)
ENABLE;

alter table A_PEDIDO
    ADD CONSTRAINT A_PEDIDO_ESTADO
    CHECK (ESTADO IS NOT NULL)
ENABLE;



create table A_PROVEEDOR
    (NIT NUMBER, ROL VARCHAR2(255 BYTE),
    NOMBRE VARCHAR2(255 BYTE), CORREO_E VARCHAR2(255 BYTE),
    PRODUCTO_PROVEEDOR VARCHAR2(255 BYTE), FECHA_ENTREGAPEDIDO VARCHAR2(255 BYTE),
    CALIFICACION NUMBER,
    CONSTRAINT A_PROVEEDOR_PK PRIMARY KEY (NIT)
    );

alter table A_PROVEEDOR
    ADD CONSTRAINT FK_PROVEEDOR_FECHA
    FOREIGN KEY (FECHA_ENTREGAPEDIDO)
    REFERENCES A_PEDIDO(FECHA_E)
ENABLE;  

alter table A_PROVEEDOR
    ADD CONSTRAINT A_PROVEEDOR_CALIFVAL
    CHECK(CALIFICACION IN (0,1,2,3,4,5))
ENABLE;

alter table A_PROVEEDOR
    add constraint A_PROVEEDOR_NOMBREIN
    CHECK(NOMBRE IS NOT NULL)
ENABLE;

alter table A_PROVEEDOR
    add constraint A_PROVEEDOR_PPROVEEDOR
    CHECK(PRODUCTO_PROVEEDOR IS NOT NULL)
ENABLE;


    

create table A_COMPRADOR
    (TIPO VARCHAR2(255 BYTE), NOMBRE_COMPRADOR VARCHAR2(255 BYTE),
    ID_DOC NUMBER,
    CONSTRAINT A_COMPRADOR_PK PRIMARY KEY (NOMBRE_COMPRADOR));

alter table A_COMPRADOR
    ADD CONSTRAINT FK_COMPRADOR_ID
    FOREIGN KEY (ID_DOC)
    REFERENCES A_USUARIO(NUM_DOC)
ENABLE;


alter table A_COMPRADOR
    add constraint A_COMPRADOR_TIPOIN
    CHECK(TIPO IS NOT NULL)
ENABLE;





create table A_FACTURA
    (FECHA DATE, NOMBRE_COMPRADOR VARCHAR2(255 BYTE),
    CONSTRAINT A_FACTURA_PK PRIMARY KEY(FECHA));

alter table A_FACTURA
    ADD CONSTRAINT FK_FACTURA_COMPRADOR
    FOREIGN KEY (NOMBRE_COMPRADOR)
    REFERENCES A_COMPRADOR(NOMBRE_COMPRADOR)
ENABLE;




create table A_COMPRA
    (ID NUMBER, FECHA_FACTURA DATE, NOMBRE_PRODUCTO VARCHAR2(255 BYTE),
    CONSTRAINT A_COMPRA_PK PRIMARY KEY (ID));

alter table A_COMPRA
    ADD CONSTRAINT FK_COMPRA_FECHA
    FOREIGN KEY (FECHA_FACTURA)
    REFERENCES A_FACTURA(FECHA)
ENABLE;

alter table A_COMPRA
    ADD CONSTRAINT FK_COMPRA_PRODUCTO
    FOREIGN KEY (NOMBRE_PRODUCTO)
    REFERENCES A_PRODUCTO (NOMBRE)
ENABLE;





create table A_CATEGORIA
    (TIPO VARCHAR2(255 BYTE), NOMBRE_PRODUCTO VARCHAR2(255 BYTE),
    CONSTRAINT A_CATEGORIA_PK PRIMARY KEY (TIPO));
    
alter table A_CATEGORIA
    ADD CONSTRAINT FK_CATEGORIA_PRODUCTO
    FOREIGN KEY (NOMBRE_PRODUCTO)
    REFERENCES A_PRODUCTO(NOMBRE)
ENABLE;




create table A_CONTENEDOR
    (ID NUMBER, TIPO VARCHAR2(255 BYTE), CAPACIDAD NUMBER,
    CATEGORIA VARCHAR2(255 BYTE),
    CONSTRAINT A_CONTENEDOR_PK PRIMARY KEY (ID));
    

alter table A_CONTENEDOR
    ADD CONSTRAINT FK_CONTENEDOR_CATEGORIA
    FOREIGN KEY (CATEGORIA)
    REFERENCES A_CATEGORIA (TIPO)
ENABLE;

alter table A_CONTENEDOR
    add constraint A_CONTENEDOR_TIPOIN
    CHECK(TIPO IS NOT NULL)
ENABLE;

alter table A_CONTENEDOR
    add constraint A_CONTENEDOR_CAPACIDADIN
    CHECK(CAPACIDAD IS NOT NULL)
ENABLE;




create table A_SUPERMERCADO
    (NOMBRE VARCHAR2(255 BYTE), NIT_PROVEEDOR NUMBER,
    CONSTRAINT A_SUPERMERCADO_PK PRIMARY KEY (NOMBRE));
    


alter table A_SUPERMERCADO
    ADD CONSTRAINT FK_SUPERMERCADO_NIT
    FOREIGN KEY (NIT_PROVEEDOR)
    REFERENCES A_PROVEEDOR (NIT)
ENABLE;




create table A_SUCURSAL
    (NOMBRE VARCHAR2(255 BYTE), DIRECCION VARCHAR2(255 BYTE), CIUDAD VARCHAR2(255 BYTE),
    NOMBRE_SUPERMERCADO VARCHAR2(255 BYTE), ID_CONTENEDOR NUMBER, ID_COMPRA NUMBER,
    DOCUMENTO_USUARIO NUMBER,
    CONSTRAINT A_SUCURSAL_PK PRIMARY KEY (NOMBRE));

alter table A_SUCURSAL
    ADD CONSTRAINT A_SUCURSAL_DIRECCION
    UNIQUE (DIRECCION)
ENABLE;

alter table A_SUCURSAL
    add constraint A_CONTENEDOR_DIRECCIONIN
    CHECK(DIRECCION IS NOT NULL)
ENABLE;

alter table A_SUCURSAL
    add constraint A_CONTENEDOR_CIUDADIN
    CHECK(CIUDAD IS NOT NULL)
ENABLE;

alter table A_SUCURSAL
    ADD CONSTRAINT FK_SUCURSAL_CONTENEDOR
    FOREIGN KEY (ID_CONTENEDOR)
    REFERENCES A_CONTENEDOR (ID)
ENABLE;

alter table A_SUCURSAL
    ADD CONSTRAINT FK_SUCURSAL_COMPRA
    FOREIGN KEY (ID_COMPRA)
    REFERENCES A_COMPRA (ID)
ENABLE;

alter table A_SUCURSAL
    ADD CONSTRAINT FK_SUCURSAL_DOCUMENTO
    FOREIGN KEY (DOCUMENTO_USUARIO)
    REFERENCES A_USUARIO (NUM_DOC)
ENABLE;

COMMIT;


